version: 1
frontend:
  phases:
    preBuild:
      commands:
        # 環境変数の確認（デバッグ用）
        - echo "AZURE_OPENAI_TARGET_URI=$AZURE_OPENAI_TARGET_URI"
        - echo "AZURE_OPENAI_TARGET_KEY=$AZURE_OPENAI_TARGET_KEY"
        - echo "GEMINI_API_KEY=$GEMINI_API_KEY"
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
      - .next/cache/**/*
