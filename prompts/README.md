# プロンプトファイル管理

このディレクトリでは、IR分析用のプロンプトテンプレートをMarkdownファイルとして管理しています。

## ディレクトリ構造

```
prompts/
├── README.md          # このファイル
└── templates/         # プロンプトテンプレートファイル
    ├── securities-report-v1.md    # 有価証券報告書分析用
    ├── earnings-brief-v1.md       # 決算短信分析用
    ├── integrated-report-v1.md    # 統合報告書分析用
    └── mid-term-plan-v1.md        # 中期経営計画分析用
```

## プロンプトファイルの形式

各プロンプトファイルは以下の形式で作成してください：

```markdown
---
id: unique-prompt-id
name: プロンプト表示名
description: プロンプトの説明
category: カテゴリ名（オプション）
tags:
  - タグ1
  - タグ2
created: 2024-01-01
updated: 2024-01-01
---

# プロンプトの内容

ここにLLMに送信するプロンプト内容を記述します。

動的変数も使用できます：
- {summary_list} - 企業リスト
- {base_corp_name} - 基準企業名
- {comparison_corp_names} - 比較企業名一覧
```

## 新しいプロンプトの追加方法

1. `prompts/templates/` フォルダに新しい `.md` ファイルを作成
2. 上記の形式でメタデータとプロンプト内容を記述
3. アプリケーションで「🔄 再読み込み」ボタンをクリック
4. 新しいプロンプトがドロップダウンに表示されます

## メタデータフィールドの説明

- **id**: 一意識別子（必須）。ファイル名と同じにすることを推奨
- **name**: 画面に表示される名前（必須）
- **description**: プロンプトの説明（オプション）
- **category**: カテゴリ分類（オプション）
- **tags**: タグ配列（オプション）
- **created**: 作成日（オプション）
- **updated**: 更新日（オプション）

## 利用可能な動的変数

プロンプト内で以下の変数を使用できます：

### 統合変数（推奨）
- `{summary_list}` - 入力された企業数に応じて自動展開される企業リスト
- `{comparison_corp_names}` - 比較企業名をカンマ区切りで表示

### 個別変数
- `{base_corp_name}` - 基準企業名
- `{base_corp_summary}` - 基準企業要約
- `{comp1_corp_name}` - 比較企業1名
- `{comp1_corp_summary}` - 比較企業1要約
- `{comp2_corp_name}` - 比較企業2名
- `{comp2_corp_summary}` - 比較企業2要約
- （以下、comp3, comp4まで同様）

## ベストプラクティス

1. **ファイル名**: 英数字とハイフンを使用（例：`financial-analysis-v2.md`）
2. **ID**: ファイル名から拡張子を除いた名前を使用
3. **バージョニング**: 同じタイプのプロンプトは v1, v2 などでバージョン管理
4. **カテゴリ**: 関連するプロンプトは同じカテゴリでグループ化
5. **変数使用**: 統合変数（`{summary_list}`）を優先的に使用

## 注意事項

- ファイルの文字エンコーディングはUTF-8で保存してください
- Front matter（`---`で囲まれた部分）の YAML 形式を正しく記述してください
- プロンプト内容は Markdown 形式で記述できますが、LLMには plain text として送信されます
